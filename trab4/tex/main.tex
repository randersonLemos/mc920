\documentclass{article}

\usepackage[utf8]{inputenc}

\usepackage{hyperref}

\usepackage{amsmath}
\usepackage{bm}

\usepackage{scrextend}

\usepackage{geometry}
\geometry{
	a4paper,
	total={170mm,257mm},
	left=20mm,
	top=20mm,
}

\usepackage{graphicx}
\usepackage[portuguese]{babel}
\usepackage{subfig}


\usepackage{listings}
\usepackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
	backgroundcolor=\color{backcolour},   
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2
}

\lstset{style=mystyle}

%\usepackage{indentfirst}
\setlength{\parindent}{1.5cm}% too much in my eyes delete this
% line and use the default ...


\title{
	Aplicando projeções perspectiva e geométrica (trabalho 4) \\
	\Large Introdução ao Processamento de Imagem Digital \\
	Randerson A. Lemos (103897)
	2022-1S
}

\date{\vspace{-5ex}}

\begin{document}
  \pagenumbering{gobble}
  \maketitle

%
%%
\section{Introdução}
Encontrar a correspondência entre pixels de diferentes imagens que capturam a mesma informação de ângulos, posições e perspectivas diferentes é uma problema muito comum abordado pelo processamento de imagens. Esses problemas são genericamente denominados de problemas de Registro e sua resolução normalmente se desenvolve pelo uso dos conhecimento de álgebra linear e suas ideias de espaços vetoriais e transformações entre tais espaços por meio de matrizes de transformação. Para exemplificar em termos práticos os problemas de registro, observe a Figura \ref{fig:trans} a seguir retirada do material de aula.

\begin{figure}[!htp]%
	\centering
	\includegraphics[width=10cm]{transformacao.png}
	\caption{Aplicação da matriz de transformação $\mathbf{T}$ entre as imagens $\mathbf{f}$ e $\mathbf{f'}$ (\textbf{fonte}: material de aula).}%	
	\label{fig:trans}%
\end{figure}

\noindent
Nesse figura, temos duas imagens $\mathbf{f}$ e $\mathbf{f'}$ cujo pixels estão relacionados pela matriz de transformação $\mathbf{T}$, ou seja

\begin{equation}
\mathbf{f'} = \mathbf{T}\mathbf{f}.
\label{eq:trans}
\end{equation}

\noindent
Na Equação \ref{eq:trans}, a matriz de transformação $\mathbf{T}$ está fazendo o mapeamento da imagem $\mathbf{f}$ para a imagem $\mathbf{f'}$. Tal mapeamento pode ser representado como $\mathbf{T}: \mathbf{f} \mapsto \mathbf{f'}$. Um aspecto importante que precisa ser levado em conta nos problemas de registro é o da natureza discreta das informações presentes, isto é: das imagens digitais. Devido a essa natureza, o mapeamento direto $\mathbf{T}: \mathbf{f} \mapsto \mathbf{f'}$ nem sempre vai conduzir um pixel válido da imagem de origem $\mathbf{f}$ para um pixel válido da imagem de destino $\mathbf{f'}$, uma vez que depois de aplicada a matriz de transformação não há garantias que o pixel transformado seja discreto e esteja contido dento do domínio da imagem de destino $\mathbf{f'}$. Para contornar esse aspecto prático da aplicação das matrizes de transformação em domínios discretos, a solução encontrada foi fazer uso da transformação inversa e de métodos de interpolação, isto é:

\begin{equation}
\mathbf{f} = \mathbf{T^{-1}}\mathbf{f'}.
\label{eq:transinv}
\end{equation}

\noindent
A aplicação da transformação inversa garante que todos os pixels da imagem de destino $\mathbf{f'}$ sejam considerados no problema de encontrar seu correspondente na imagem de origem $\mathbf{f}$ e a aplicação das técnicas de interpolação garante que todos os pixels transformados estejam associados a algum pixel válido da imagem de origem $\mathbf{f}$. Existem diversas técnicas de interpolação, sendo algumas das mais conhecidas as seguintes: Interpolação pelo Vizinho Mais Próximo, Interpolação Bilinear, Interpolação Bicúbica e Interpolação por Polinômios de Lagrange. Essas interpolações são amplamente discutidas no material da disciplina como também no documento de instruções desse trabalho.

Os problemas de registro são principalmente organizados em problemas de transformações geométricas e problemas de transformações projetivas. Ambos esses problemas serão discutidos em mais detalhes a seguir.

\subsection{Transformações geométricas}
Os problemas de transformação geométricas consistem de uma transformação espacial e uma interpolação. A transformação espacial está associada as transformações afins de rotação, escala, translações, espelhamento e cisalhamento. Nessas transformações, o paralelismo das linhas e curvas da imagem transformada é preservado, mas dimensões lineares, de área ou volumétricas não. Em coordenadas homogêneas e considerando o caso bidimensional, essas transformações podem ser generalizadas por

\begin{equation}
\begin{bmatrix} 
X'\\
Y'\\
W \\
\end{bmatrix}
=
\begin{bmatrix} 
a & b & c \\
d & e & f \\
g & h & i \\
\end{bmatrix}
%
\begin{bmatrix} 
X \\
Y \\
W \\
\end{bmatrix}.
\label{eq:transexp}
\end{equation}

\noindent
Cada uma das transformações de rotação, escala, translação, espelhamento e cisalhamento terão uma matriz de transformação específica (a matriz com os coeficientes $a,b,\cdots, i$). A seguir, vamos conhecer a forma das matrizes das transformações de escala, translação e rotação.

\subsubsection{Transformação de Escala}
A transformação de escala para o caso 2D pode ser realizada a partir da matriz de transformação em coordenadas homogêneas apresenta a seguir.

\begin{equation}
\begin{bmatrix} 
X'\\
Y'\\
W \\
\end{bmatrix}
=
\begin{bmatrix} 
S_x & 0   & 0 \\
0   & S_y & 0 \\
0   & 0   & 1 \\
\end{bmatrix}
%
\begin{bmatrix} 
X \\
Y \\
W \\
\end{bmatrix}.
\label{eq:transesc}
\end{equation}

\noindent
Então, para aplicar um aumento ou redução de escala da imagem, o usuário precisa definir o valor de escala $S_x$ a ser aplicado ao longo do eixo-x e o valor de escala $S_y$ a ser aplicado ao longo do eixo-y.
 
\subsubsection{Transformação de Translação} 
A transformação de translação para o caso 2D pode ser realizada a partir da matriz de transformação em coordenadas homogêneas apresenta a seguir.

\begin{equation}
\begin{bmatrix} 
X'\\
Y'\\
W \\
\end{bmatrix}
=
\begin{bmatrix} 
1 & 0 & t_x \\
0 & 1 & t_y \\
0 & 0 & 1 \\
\end{bmatrix}
%
\begin{bmatrix} 
X \\
Y \\
W \\
\end{bmatrix}.
\label{eq:transtra}
\end{equation}

\noindent
Então, para aplicar uma translação na imagem, o usuário precisa definir o valor de translação $t_x$ a ser apicado ao longo do eixo-x e o valor de translação $t_y$ a ser aplicado ao longo do eixo-y.

\subsubsection{Transformação de Rotação} 
A transformação de rotação para o caso 2D pode ser realizada a partir da matriz de transformação em coordenadas homogêneas apresenta a seguir.

\begin{equation}
\begin{bmatrix} 
X'\\
Y'\\
W \\
\end{bmatrix}
=
\begin{bmatrix} 
cos(\alpha) & -sin(\alpha) & 0 \\
sin(\alpha) & cos(\alpha)  & 0 \\
0           & 0            & 1 \\
\end{bmatrix}
%
\begin{bmatrix} 
X \\
Y \\
W \\
\end{bmatrix}.
\label{eq:transrot}
\end{equation}

\noindent
Então, para aplicar uma rotação na imagem, o usuário precisa definir o valor de rotação $\alpha$ a ser aplicado na imagem.

\subsection{Transformações projetivas}
As transformações projetivas estão associadas ao processo de projeção de pontos dispostos tridimensionalmente no espaço em um plano bidimensional. Esses transformações são principalmente do tipo ortográfica ou perspectiva. A projeção ortográfica é uma transformação que realiza o mapeamento de pontos tridimensionais sobre o plano da imagem, tal que os pontos são projetados ao longo de linhas paralelas na imagem (informação extraída do material de aula). Já as projeções perspectivas, apesar de haver o mesmo mapeamento de um espaço tridimensional para um espaço bidimensional (um plano), o tamanho do objecto projeto assim como algumas razões de suas medidas lineares e de área são dependentes do aumento da distância do centro de projeção. Essa dependência está associada a percepção de profundida do sistema visual humano. A ideia das transformações projetivas está apresentada na Figura \ref{fig:transpro}.

\begin{figure}[!htp]%
	\centering
	\includegraphics[width=10cm]{transformacaoprojetiva.png}
	\caption{Modelagem geométrica de transformação projetiva (\textbf{fonte}: material de aula).}%	
	\label{fig:transpro}%
\end{figure}

\newpage
Existem algumas maneiras de se calcular a matriz de transformação de uma transformação projetiva. No caso particular das projeções perspectivas, umas das formas de ser obter tal matriz é a partir de quatro pontos não colineares e a resolução das seguintes equações

\begin{equation}
X' = \frac{aX + bY + c}{iX + jY + 1}
\qquad\qquad
Y' = \frac{fX + eY + f}{iX + jY + 1}
\label{eq:transpes}
\end{equation}
considerando-se os quatro pontos não colineares em questão. Os valores obtidos da resolução do sistema de equações para as variáveis $a,b,c,d,e,i,j$ são os coeficientes da matriz de transformação 
\[
\begin{bmatrix} 
	a & b & c \\
	d & e & f \\
	i & j & 1 \\
\end{bmatrix}
\]
da projeção perspectiva em questão.

%
%%
\section{Solução}
A solução utiliza a linguagem de programação Python e conta com o auxílio do gerenciador de projetos e pacotes Conda. Assumindo que o usuário tenha o Conda instalado em sua máquina, a configuração do projeto pode ser feita pela execução do comando \lstinline{conda env create -f environment.yml} a partir da pasta do projeto \textbf{trab3}. Esse comando cria o ambiente de trabalho \textbf{mc920-trab3} e instala os seguintes módulos: opencv, numpy, scipy, pandas, matplotlib. Finalizada a configuração do ambiente de trabalho em questão, o usuário deve executar o comando \lstinline{source source.sh}\footnote{O comando que configura o ambiente de trabalho mc920-trab3 precisa ser executado apenas um vez. Assim sendo, depois que este ambiente está configurado, o usuário precisa apenas executar o comando \lstinline{source source.sh}} para carregar as variáveis de ambiente adequadas e, assim, poder usar os programas do projeto dentro do próprio ambiente de trabalho recém configurado. 

Dos arquivos presentes na pasta do projeto \textbf{trab3}, destacam-se as pastas \textbf{assets}, \textbf{classes}, \textbf{tex} e o programa \textbf{main.py}. A pasta \textbf{assets} contém vídeos no formato png ou mpg que podem ser utilizados para a aplicação das técnicas de identificação de transições abruptas implementadas. A pasta \textbf{classes} contém arquivos com as implementações das diferentes técnicas de identificação de transições abruptas em formato de classes. Os arquivos das classes das técnicas são: \textbf{blocksdifferences.py}, \textbf{edgesdifferences.py}, \textbf{histogramdifferences.py}, e \textbf{pixelsdifferences.py}. A pasta \textbf{tex} contém os arquivos Latex deste relatório. O programa \textbf{main.py} contém as implementações necessárias para aplicar as técnicas de identificação de transições abruptas no vídeo de entrada fornecido pelo usuário. Informações pertinentes das implementações serão apresentadas a seguir.

%
\subsection{Main.py}
O programa \textbf{main.py} é responsável pela aplicação de todas as técnicas consideradas de identificação de transições abruptas entre quadros consecutivos de vídeos. Para ser executado, esse programa precisa receber o parâmetro de entrada \textbf{video\_entrada}:

\begin{itemize}
	\item ao parâmetro \textbf{video\_entrada} deve-se fornecer o nome do arquivo do vídeo a ser utilizado para aplicação das técnicas de identificação de transições abruptas.
\end{itemize}
	
\noindent 
O programa \textbf{main.py} disponibiliza tanto um vídeo no formato $mp4$ dos quadros considerados como pertencentes a transições abruptas como também gráficos em formato png da evolução dos valores de distância utilizados para determinação de transições abruptas ou não. Todo esse conteúdo é salvo dentro da pasta \textbf{out} que está localizada dentro da pasta do projeto \textbf{trab3}.

Um exemplo de como executar o programa \textbf{main.py} utilizando os recursos contidos dentro do próprio projeto é: \lstinline{python3 main.py -video_entrada=assets/lisa.mpg}.

O programa \textbf{main.py} executa quatro funções principais, as quais são: \textbf{main\_pixels\_differences( path, stem )}; \textbf{main\_blocks\_differences( path, stem )}; \textbf{main\_histog\_differences( path, stem )}; e \textbf{main\_edges\_differences( path, stem )}. Cada uma dessas funções é responsável por executar a técnica de identificação de transições abruptas que encapsula várias vezes utilizando diferentes combinações de parâmetros de entrada (tolerâncias e limiares). Essas funções também estão encarregadas de salvar todo o conteúdo gerado (os vídeos e gráficos) com nomes intuitivos dentro da pasta \textbf{out}. A seguir olharemos para essas funções e, principalmente, para as técnicas de identificação de transições abruptas associadas.


%
\subsection{main\_pixels\_differences( path, stem )}
Esse função roda a classe \textbf{PixelsDifferences} sobre as tuplas resultantes do produto cartesiano entre os conjuntos $MPNDS \times MPNNS$ cujos elementos são
\[
MPNDS = \{0.1; 0.2; 0.3; 0.4; 0.5; 0.6; 0.7 \}
\]
e
\[
MPNNS = \{0.1; 0.2; 0.3; 0.4; 0.5; 0.6; 0.7 \}.
\]
MPNDS é sigla de \textit{Maximum Pixel Normalized Distances} e MPNNS é sigla de \textit{Maximum Pixel Normalized Numbers}. Os valores do conjunto MPNDS fazem referência a tolerância $T_1$ utilizada para verificar se dois pixels são ou não significativamente diferentes. Os valores do conjunto NPNNS fazem referência ao limiar $T_2$, que é utilizado para determinar se o número final de pixels considerados diferentes é suficiente para que os quadros consecutivos sejam classificados como tendo uma transição abrupta. Ambos os valores dos conjuntos em questão apresentam domínio pertencente ao intervalo $[0,1]$ porque tanto o calculo da tolerância $T_1$ quando do limiar $T_2$ e feito de maneira normalizada. Para comparação com a tolerância $T_1$, o cômputo da distância entre pixels é feita da seguinte maneira
\[
	d_{xy} = | Q_i(x,y) - Q_{i+1}(x,y) | / 255,
\]
em que $Q_i(x,y)$ é o valor de intensidade do pixel da posição $(x,y)$ do i-ésimo quadro em escala de cinza do vídeo analisado. Como a diferença máxima entre pixels em escala de cinza representados com 1 bite é de 255, o valor da variável $d$ sempre vai pertencer ao intervalo $[0,1]$. Para comparação com o limiar $T_2$ o cômputo do numero de pixels que apresentam transições abruptas é feita assim
\[
D_i = \sum_{x=0}^{x=M}\sum_{y=0}^{y=N} (1 \text{  se  } d_{xy} > T_1 \text{  caso contrario  } 0.
\]
Caso $D_i$, isto é o número de pixels considerados diferentes de acordo com a tolerância $T_1$ entre o i-ésimo e (i+1)-ésimo quadros, for superior que o limiar $T_2$, o quadro (i+1)-ésimo é classificado como contendo uma transição abrupta.


%
\subsection{main\_blocks\_differences( path, stem )}
Esse função roda a classe \textbf{BlocksDifferences} sobre as tuplas resultantes do produto cartesiano entre os conjuntos $MBNDS \times MBNNS$ cujos elementos são
\[
MBNDS = \{0.1; 0.2; 0.3; 0.4; 0.5; 0.6; 0.7 \}
\]
e
\[
MBNNS = \{0.1; 0.2; 0.3; 0.4; 0.5; 0.6; 0.7 \}.
\]
MBNDS é sigla de \textit{Maximum Block Normalized Distances} e MBNNS é sigla de \textit{Maximum Block Normalized Numbers}. Os valores do conjunto MBNDS fazem referência a tolerância $T_1$ utilizada para verificar se dois blocos são ou não significativamente diferentes. Os valores do conjunto NBNNS fazem referência ao limiar $T_2$, que é utilizado para determinar se o número final de blocos considerados diferentes é suficiente para que os quadros consecutivos sejam classificados como tendo uma transição abrupta. Ambos os valores dos conjuntos em questão apresentam domínio pertencente ao intervalo $[0,1]$ porque tanto o calculo da tolerância $T_1$ quando do limiar $T_2$ e feito de maneira normalizada. 

Para comparação com a tolerância $T_1$ o cômputo da distância entre blocos é feita da seguinte maneira
\[
d_ai = \sum_{w=0}^{8}\sum_{k=0}^{8}(B_{a_{i}}(w,k) - B_{a_{i+1}}(w,k))^2 / 255^2,
\]
em que $d_ai$ é a distância quadrática normalizada dos a-ésimos blocos entre os quadros $i$ e $i+1$. Logo $B_{a_{i}}(w,k)$ é o valor em escala de cinza do pixel que está na posição $(w,k)$ do a-ésimo bloco da i-ésima imagem. Os valores de $d_ai$ estão contidos no intervalo $[0,1]$ (o termo $255^2$ é um fator de normalização). 

Para comparação com o limiar $T_2$, o número total de blocos que violam a tolerância $T_1$ é levantado e, se esse valor ultrapassar o limiar $T_2$, os quadros consecutivos utilizados na comparação por meio dos seus blocos são considerados como possuidores de transições abruptas. Os valore utilizados em $T_2$ estão normalizados pelo número total de blocos que cabe nos quadros do vídeo analisado e por isso também estão contidos dentro do intervalo $[0,1]$.
%
\subsubsection{Detalhes de implementação e execução}
Como requisitado no trabalho, a classe \textbf{BlocksDifferences} é capaz de trabalhar com blocos de $8\times8$ ou $16\times16$. No entanto para os resultados mostrados, apenas execuções com blocos de tamanho $8\times8$ foram considerados. Sobre o problema do casamento exato ou não entre as dimensões dos blocos (que pode ser de $8\times8$ ou $16\times16$) e as dimensões da imagem o tratamento dado foi: Começar sempre a subdivisão da imagem em blocos a partir da posição $(0,0)$ e, caso ocorra, as possíveis bordas presentes na parte da direita ou na parte de baixo da imagem são desconsideradas.


%
\subsection{main\_histog\_differences( path, stem )}
Esse função roda a classe \textbf{HistogramDifferences} sobre o conjunto dos valores
\[
\alpha = \{3,4,5,6\},
\]
que são os valores sugeridos na descrição do trabalho. Nenhuma modificação na forma de se calcular a diferença dos histogramas de quadros consecutivos foi realizada de modo que tal cálculo já está explicitado na parte da secção de introdução que trata desse técnica de identificação de mudanças abruptas entre quadros. No entanto vale destacar que os histogramas foram normalizados de modo que a soma dos valores de seus \textit{bins} totaliza 1.
%
\subsubsection{Detalhes de implementação e execução}
Para o cálculo dos histogramas, optou-se por utilizar uma implementação própria ao invés de usar alguma função disponibilizada pelos módulos do opencv ou do numpy.


%
\subsection{main\_edges\_differences( path, stem )}
Essa função roda a classe \textbf{EdgesDifferences} sobre o conjuto de valores
\[
    MENDS = [0.010, 0.015, 0.020, 0.025, 0.030, 0.035].
\]
MENDS é sigla de \textit{Maximum Edges Normalized Difference}. Os valores desse conjunto estão dentro do itervalo $[0,1]$ e eles representam a diferença máxima normalizada de bordas entre quadros consecutivos tolerada. A normalização é feita considerando a diferença máxima de bordas entre quadros consecutivos possível que ocorreria quando um quadro não teria nenhuma borda e o outro quadro teria apenas `bordas'. Logo a diferença máxima possível, nessa situação, seria igual ao número de pixels dos quadros do vídeo analisado.


%
\subsubsection{Detalhes de implementação e execução}
Para o cálculo do mapa de bordas, foi utilizado o famoso algoritmo Canny que foi desenvolvido por John F. Canny. Esse algoritmo é bastante popular devido a sua versatilidade e robustez. Ele contempla etapas de redução de ruídos, determinação das intensidades do gradiente da imagem, e aplicação de supressão não máxima e teste de hipóteses. Utilizou-se a versão do algoritmo disponibilizada pelo módulo do opencv $Canny$ com os parâmetros de entrada fixos. O parâmetro de valor mínimo de 100 e o parâmetro de valor máximo de 200. 

Mesmo o algoritmo de detecção de bordas de Canny já conter um etapa de suavização de ruídos, optou-se antes de aplicá-lo, suavizar o quadro de interesse bom um filtro Gaussiano (passa-baixo) de dimensão $5\times5$.


\section{Resultado}
Todos os resultados apresentados foram gerados pelo processamento do vídeo \textbf{lisa.mpg} que está dentro da pasta \textbf{assets}. Devido ao grande número de combinações de parâmetros das quatro técnicas de identificação de mudanças abruptas entre quadros considerados e, consequentemente, o grade número de conteúdo gerado (entre vídeos e gráficos) serão apresentados aqui apenas um subconjunto desses materiais (caso haja interesse do leitor em verificar a totalidade desse conteúdo basta acessá-los dentro da pasta \textbf{out}). Aquim, serão apresentados os gráficos gerados que evidenciam o quão diferentes são dois quadros consecutivos e o número de quadros que foram considerados como detenedores de uma transição abrupta.

\newpage
\subsection{Diferenças entre pixels}

%\begin{figure}[!htp]%
%	\centering
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T_1=0.1$ e $T_2=0.1$ (veja vídeo: \url{https://youtu.be/BLa\_RR3D7Hw}).]{{ \includegraphics[width=10cm]{lisa_pixeldiff_mpnd_10_mpnn_10_nframe_00218.png} 
%	}}%
%	\\
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T_1=0.1$ e $T_2=0.3$ (veja vídeo: \url{https://youtu.be/dqFbqMDnW90}).]{{ \includegraphics[width=10cm]{lisa_pixeldiff_mpnd_10_mpnn_30_nframe_00009.png} 
%	}}%	
%	\\
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T_1=0.1$ e $T_2=0.5$ (veja vídeo: \url{https://youtu.be/9uXixvLlcV4}).]{{ \includegraphics[width=10cm]{lisa_pixeldiff_mpnd_10_mpnn_50_nframe_00004.png} 
%	}}%	
%	\caption{Imagem com gráficos do número de pixels (distância do limiar $T_2$) com diferenças de valores entre quadros consecutivos superiores a tolerância $T_1$.}%	
%	\label{fig:diferenca_pixels}%
%\end{figure}
%
%\newpage
%\subsection{Diferenças entre blocos}
%
%\begin{figure}[!htp]%
%	\centering
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T_1=0.4$ e $T_2=0.1$ (veja vídeo: \url{https://youtu.be/mm43T9BhlUU}).]{{ \includegraphics[width=10cm]{lisa_blockdiff_mbnd_40_mbnn_10_nframe_00375.png} 
%	}}%
%	\\
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T_1=0.4$ e $T_2=0.3$ (veja vídeo: \url{https://youtu.be/r4TxG6zJtIg}).]{{ \includegraphics[width=10cm]{lisa_blockdiff_mbnd_40_mbnn_30_nframe_00108.png} 
%	}}%	
%	\\
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T_1=0.4$ e $T_2=0.5$ (veja vídeo: \url{https://youtu.be/5yxTwq2srKw}).]{{ \includegraphics[width=10cm]{lisa_blockdiff_mbnd_40_mbnn_50_nframe_00014.png} 
%	}}%	
%	\caption{Imagem com gráficos do número de blocos (distância do limiar $T_2$) com diferenças de valores entre quadros consecutivos superiores a tolerância $T_1$.}%	
%	\label{fig:diferenca_blocos}%
%\end{figure}
%
%
%\newpage
%\subsection{Diferenças entre histograma}
%
%\begin{figure}[!htp]%
%	\centering
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $\alpha=3$ (veja vídeo: \url{https://youtu.be/taISwMqDRO4}).]{{ \includegraphics[width=10cm]{lisa_histdiff_alpha_3_thres_0.578_nframe_00011.png} 
%	}}%
%	\\
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $\alpha=4$ (veja vídeo: \url{https://youtu.be/hoMm_-U1uqY}).]{{ \includegraphics[width=10cm]{lisa_histdiff_alpha_4_thres_0.723_nframe_00009.png} 
%	}}%	
%	\\
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $\alpha=5$ (veja vídeo: \url{https://youtu.be/-NX1KpQSwvM}).]{{ \includegraphics[width=10cm]{lisa_histdiff_alpha_5_thres_0.867_nframe_00005.png} 
%	}}%	
%	\caption{Imagem com gráficos da diferença entre quadro consecutivos por meio da técnica da diferença entre histogramas.}%	
%	\label{fig:diferenca_histogramas}%
%\end{figure}
%
%
%\newpage
%\subsection{Diferenças entre borda}
%
%\begin{figure}[!htp]%
%	\centering
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T=0.01$ (veja vídeo: \url{https://youtu.be/OpjOwV45uxY}).]{{ \includegraphics[width=10cm]{lisa_edgediff_mpnd_1.0_nframe_00014.png} 
%	}}%
%	\\
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T=0.015$ (veja vídeo: \url{https://youtu.be/ICLpevnXpGE}).]{{ \includegraphics[width=10cm]{lisa_edgediff_mpnd_1.5_nframe_00008.png} 
%	}}%	
%	\\
%	\subfloat[\centering Gráfico dos quadros com trasições abruptas para $T=0.02$ (veja vídeo: \url{https://youtu.be/Qkp-s1RcZSM}).]{{ \includegraphics[width=10cm]{lisa_edgediff_mpnd_2.0_nframe_00002.png} 
%	}}%	
%	\caption{Imagem com gráficos da diferença entre quadro consecutivos por meio da técnica da diferenças entre borda.}%	
%	\label{fig:diferenca_bordas}%
%\end{figure}
%%
%%%
%\section{Discussão e Conclusão}
%É possível verificar, dos gráficos apresentados, que as diferentes técnicas de identificação de transições abruptas discriminam os quadros consecutivos de maneira significativamente diferente. Esse afirmação se sustenta pelos diferentes padrões de distribuição dos valores do eixo y ao longo do eixo x. Nesse aspecto (dos padrões de descriminação), há uma aproximação entre os comportamentos das técnicas de diferenças entre pixel e diferenças entre bloco (Figuras \ref{fig:diferenca_pixels} e \ref{fig:diferenca_blocos}) e entre os comportamentos das técnicas de diferenças entre histograma e diferenças entre borda (Figuras \ref{fig:diferenca_histogramas} e \ref{fig:diferenca_bordas})). Percebe-se que as técnicas de diferenças entre pixel e diferenças entre borda apresentam maior dificuldade em discriminar os quadros consecutivos com transições abruptas que as técnicas de diferenças entre histograma e de diferenças entre borda já que nas duas primeiras técnicas há maior amplitude nos valores de distância do eixo y que nas duas últimas técnicas.
%
%Por outro lado, as técnicas de diferenças entre pixel e diferenças entre borda se mostraram menos custosas em termos computacionais que as técnicas de diferenças entre histograma e diferenças entre borda.
%
%É também facilmente verificável que o desempenho das técnicas, no sentido de encontrar uma quantidade aceitável de quadros significativos, é  intimamente relacionado com os valores dos seus parâmetros. Por exemplo, na técnica de diferença entre blocos encontrou-se para os parâmetros $T_1=0.40$ e $T_2=0.10$ o número de $375$ quadros significativos de um total de $649$ quadros (um resultado pouco animador). No entanto, essa mesma técnicas, para os valores de parâmetros $T_1=0.40$ e $T_2=0.50$, encontrou um total de $14$ quadros com transições abruptas de uma total de $649$ quadros (um resultado bem mais interessante) (Figura \ref{fig:diferenca_blocos}).
%
%Para o vídeo utilizado nesse trabalho, as técnicas de diferenças entre histograma e diferenças entre borda se mostraram mais interessantes. Essas técnicas encontraram um conjunto significativamente pequeno de quadros com transições abruptas (afirmação que pode ser comprovada visualizando os vídeos disponibilizados no youtube). Para a técnica de diferenças entre histograma com a configuração de $\alpha=5$ foram encontrados 5 quadros significativos (com transições abruptas) )(Figura \ref{fig:diferenca_histogramas}). Já para a técnica de diferenças entre bordas para $T=0.015$ (Figura \ref{fig:diferenca_bordas}), foram encontrados 8 quadros com transições abruptas. Esses números são bastante impressionantes e trazem uma eficiência de redução de vídeos de aproximadamente $99\%$.
%
%Do apresentado, podemos verificar que as técnicas (umas melhores que outras) foram capazes de identificar quadros associados a transições abruptas do vídeo analisado. 
%
%Caso haja necessidade de uma solução de identificação de transições abruptas entre quadros consecutivos mais robusta, uma alternativa seria experimentar o desempenho de um técnica resultante da combinação linear das técnicas aqui implementadas. Por fim, a técnicas foram satisfatoriamente implementadas e testadas.
\end{document}
